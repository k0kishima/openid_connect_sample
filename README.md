# 認可サーバーにクライアントを登録する

## この章の目的

認可サーバーにクライアントを登録する

## 対応理由

* クライアントが認可サーバーへ接続を行うためには、お互いについての情報共有が事前に必要なため

## 要件

* ~~認可サーバーにクライアント登録のためのUIが実装されていること~~
* ~~クライアントの登録者は、発行されたクライアントIDとクライアントシークレットを参照することができること~~
* ~~認可サーバーにユーザー登録してログインしないとクライアントの登録や管理ができないこと~~

* クライアントに対し、一意なクライアントIDとクライアントシークレットが設定されていること
  * ※ 本質的な認可の方式に集中したいので便宜上、クライアントの登録フォームや管理機能を実装せず、クライアントのデータはハードコーディングする
* クライアントが利用する scope や callback_uri が設定されていること
  * ※ 一意なclient_idや乱雑なclient_secretを発行するのは認可サーバーの責務で、scope や redirect_uri を指定するのはクライアントの責務だが後者も便宜上ハードコーディングする

## 実装結果

以下の通り `http://localhost:3002/clients` へアクセスするとクライアントのデータが取得できる
<img width="1440" alt="スクリーンショット 2021-06-28 18 52 20" src="https://user-images.githubusercontent.com/56298669/123617695-7b1ef680-d842-11eb-99bd-a1e2fce11cbf.png">

※　演習の便宜上こうしているだけで識別子やシークレットを本来絶対に公開してはいけない

## MEMO

* 一般的には認可サーバーへのクライアントの登録はクライアントの開発者が行う
* RFCでは登録方法に関する取り決めはない
  * Auth0のようなIDaaSを利用すればフォームを入力・送信すればクライアントを登録できるように大抵なっているし、実装必要な場合でもライブラリを利用すれば登録のインターフェースのテンプレートやデータ設計が提供されると思われるため、実務では完全にスクラッチ実装することはあまりなさそう

<hr>

[目次](../..#readme)
